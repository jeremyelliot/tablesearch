!function(e){e.fn.tableSearch=function(t){var o=e(this),n="",a="",c="",s=[],r=[],l=[],h={columnSelector:".searchable",rowSelector:"tbody > tr",rowMatchClass:"tablesearch-match",searchResultsClass:"tablesearch-results",searchingClass:"tablesearch-searching",onMatchCell:function(e,t){i(e,t)},resetCell:function(e){i(e,"")},onMatchRow:function(e){e.addClass(n)},onNoMatchRow:null,resetMatchRow:function(e){e.removeClass(n)},resetNoMatchRow:null,onStart:function(e){e.addClass(c)},onCompleted:function(e){e.removeClass(c).addClass(a)},resetTable:function(e){e.removeClass(a)}};e.extend(h,t),n=h.rowMatchClass,a=h.searchResultsClass,c=h.searchingClass;var i=function(e,t){var o=e.html().replace(/<\/?mark>/gi,"");""!==t&&(o=o.replace(new RegExp('(^|>)([^"<>]*)('+t+')([^"<>]*)(<|$)',"gi"),"$1$2<mark>$3</mark>$4$5")),e.html(o)},f=function(t,o){if("function"==typeof t)for(;o.length>0;)t(e(o.pop()));o=[]},u=function(){f(h.resetCell,l),f(h.resetMatchRow,s),f(h.resetNoMatchRow,r),h.resetTable(o)},C=function(t){u();var n=e.trim(t).toLowerCase();""!==n&&("function"==typeof h.onStart&&h.onStart(o),o.find(h.rowSelector).each(function(){var t=e(this),o=t.find(h.columnSelector);o.text().toLowerCase().indexOf(n)>-1?("function"==typeof h.onMatchCell&&o.each(function(){var t=e(this);l.push(t),h.onMatchCell(t,n)}),"function"==typeof h.onMatchRow&&(s.push(t),h.onMatchRow(t))):"function"==typeof h.onNoMatchRow&&(r.push(t),h.onNoMatchRow(t))}),"function"==typeof h.onCompleted&&h.onCompleted(o))};return{searchFor:C,reset:u}}}(jQuery);